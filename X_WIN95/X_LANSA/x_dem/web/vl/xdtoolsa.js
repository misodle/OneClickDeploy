LANSA.addComponent({id:"XDTOOLSA",nm:"xDToolsApplication",ot:"rp",tp:"Reusable Part",de:"Application Object",tl:14020001},function(l,oI,u){var cL="ENG";if((l.gCL()=="FRA")||(l.gCL()=="JPN")||(l.gCL()=="LLL")){cL=l.gCL();}var Fd={F1:{nm:"XSACCEML",an:"XSAccountEmail",ft:"C",ln:200,dc:0,lb:{"ENG":"Email","FRA":"Courriel","JPN":"電子メール","LLL":"Email"}[cL],h1:{"ENG":"Email","FRA":"Courriel","JPN":"電子メール","LLL":"Email"}[cL],h2:{"ENG":" ","FRA":" ","JPN":" ","LLL":""}[cL],h3:{"ENG":" ","FRA":" ","JPN":" ","LLL":""}[cL],
de:{"ENG":"Email","FRA":"Courriel","JPN":"電子メール","LLL":"Email"}[cL],dv:"",ia:["FE","LC"]},F2:{nm:"XSPASSWRD",an:"XSPassword",ft:"VC",ln:40,dc:0,lb:{"ENG":"Password","FRA":"Mot de passe","JPN":"パスワード","LLL":"Password"}[cL],h1:{"ENG":"Password","FRA":"Mot de","JPN":"パスワード","LLL":"Password"}[cL],h2:{"ENG":" ","FRA":"Passe","JPN":" ","LLL":""}[cL],h3:{"ENG":" ","FRA":" ","JPN":" ","LLL":""}[cL],de:{"ENG":"Password","FRA":"Mot de passe","JPN":"パスワード","LLL":"Password"}[cL],dv:"",ia:["FE","ND"]},F3:{nm:"XSSTATUS",
an:"XSStatus",ft:"A",ln:2,dc:0,lb:"Status",h1:"Status",h2:"",h3:"",de:"Status",dv:"",ia:["FE"]}};var cO=l.rC(oI,{an:"XDTOOLSO",fd:Fd,pt:{ActiveDesign:{da:"r"},ActiveUser:{da:"r"},IsLoggedIn:{da:"r"}},mt:{Prepare:{},DesignChanged:{ps:{"Design":{pt:"i"}}},ActivateHomePage:{},ActivateSearchPage:{},ActivateSearchPageHandTools:{},ActivateSearchPagePowerTools:{},ActivateSearchPageGardenTools:{},ActivateShoppingCartPage:{},ActivateUserAccountPage:{},ActivateLogin:{},Login:{ps:{"Email":{pt:"i"},"Password":
{pt:"i"}}},LogOut:{},FindPageParameter:{},Navigate:{ps:{"URL":{pt:"i"}}},RegisterUser:{},SaveValue:{ps:{"Name":{pt:"i"},"Value":{pt:"i"}}},RestoreValue:{ps:{"Name":{pt:"i"}}}},ev:{ActivatingHomePage:{},ActivatingSearchPage:{},ActivatingShoppingCartPage:{},ActivatingUserAccountPage:{},ActivatingDesign:{ps:{"Design":{pt:"i"}}},LoggedIn:{},LoginFailed:{ps:{"Reason":{pt:"i"}}},LoggedOut:{}},co:function(){cO.aN.call(this);this.aF("XDTOOLSA",Fd);var C0=this.cR("GACTIVEDESIGN","PRIM_ALPH");var C1=this.cA("GSEARCHHANDLER","XDTOO_16");
var C2=this.cR("GACTIVEUSER","XDTOO_12");this.cD("GPENDINGSEARCHCRITERION");var C4=this.cR("GPENDINGSEARCHTYPE","PRIM_ALPH");var C5=this.cR("GLOGGEDIN","PRIM_BOLN");var C6=this.cR("LOGINPOPUP","XDTOOLSL");C0.iC();if((C1!=null)&&(C1.iI()==false)){C1.iC();}C2.iC();C4.iC();C5.iC();C6.iC();l.WEB().aH("URLCHANGED",this,e3);C2.aH("PREPARED",this,e4);this.REF.GDATAMODEL.ref.aH("PREPARED",this,e3);}});cO.mthPREPARE=function(){var f=this.FLD.XDTOOLSA,r=l.mR(this,cO,"Prepare",33);var C0=r.cR("SAVEDLOGGEDIN","PRIM_ALPH");
C0.iC();r.ln=33;{r.ln=37;this.REF.GDATAMODEL.ref.mthPREPARE();r.ln=39;f.F1.set(cO.mthRESTOREVALUE.call(this,"LOGINEMAIL"));r.ln=40;f.F2.set(l.s.Decrypt(cO.mthRESTOREVALUE.call(this,"LOGINPASSWORD"),f.F1.get()));r.ln=41;C0.set(cO.mthRESTOREVALUE.call(this,"LOGGEDIN"));r.ln=43;if(l.and(l.s.ne(f.F1.get(),""),l.s.ne(f.F2.get(),""))){r.ln=45;if(l.tB(l.s.eq(C0.get(),"TRUE"))){r.ln=47;cO.mthLOGIN.call(this,f.F1.get(),f.F2.get());}}}r.ln=53;r.e();};cO.mthDESIGNCHANGED=function(p0){var m=this.REF,r=l.mR(this,cO,"DesignChanged",55);
var P0=r.cPD("DESIGN");P0=p0;r.ln=55;{r.ln=58;if((P0==null)){r.ln=60;m.GACTIVEDESIGN.set("DESKTOP");}else{r.ln=64;m.GACTIVEDESIGN.set(P0.getName());}r.ln=68;{var eP=l.ePs();eP.cR("DESIGN","PRIM_ALPH");eP.r("DESIGN").set(m.GACTIVEDESIGN.get());this.fE("ACTIVATINGDESIGN",eP);eP.e();}}r.ln=70;r.e();};cO.mthACTIVATEHOMEPAGE=function(){var r=l.mR(this,cO,"ActivateHomePage",72);r.ln=72;{r.ln=74;this.fE("ACTIVATINGHOMEPAGE");}r.ln=76;r.e();};cO.mthACTIVATESEARCHPAGE=function(){var r=l.mR(this,cO,"ActivateSearchPage",78);
r.ln=78;{r.ln=80;this.fE("ACTIVATINGSEARCHPAGE");}r.ln=82;r.e();};cO.mthACTIVATESEARCHPAGEHANDTOOLS=function(){var m=this.REF,r=l.mR(this,cO,"ActivateSearchPageHandTools",84);r.ln=84;{r.ln=86;m.GSEARCHHANDLER.ref.mthSEARCHBYPRODUCTLINE(this.REF.GDATAMODEL.ref.mthFINDPRODUCTLINE("2"));r.ln=88;this.fE("ACTIVATINGSEARCHPAGE");}r.ln=90;r.e();};cO.mthACTIVATESEARCHPAGEPOWERTOOLS=function(){var m=this.REF,r=l.mR(this,cO,"ActivateSearchPagePowerTools",92);r.ln=92;{r.ln=94;m.GSEARCHHANDLER.ref.mthSEARCHBYPRODUCTLINE(this.REF.GDATAMODEL.ref.mthFINDPRODUCTLINE("3"));
r.ln=96;this.fE("ACTIVATINGSEARCHPAGE");}r.ln=98;r.e();};cO.mthACTIVATESEARCHPAGEGARDENTOOLS=function(){var m=this.REF,r=l.mR(this,cO,"ActivateSearchPageGardenTools",100);r.ln=100;{r.ln=102;m.GSEARCHHANDLER.ref.mthSEARCHBYPRODUCTLINE(this.REF.GDATAMODEL.ref.mthFINDPRODUCTLINE("1"));r.ln=104;this.fE("ACTIVATINGSEARCHPAGE");}r.ln=106;r.e();};cO.mthACTIVATESHOPPINGCARTPAGE=function(){var r=l.mR(this,cO,"ActivateShoppingCartPage",108);r.ln=108;{r.ln=110;this.fE("ACTIVATINGSHOPPINGCARTPAGE");}r.ln=112;
r.e();};cO.mthACTIVATEUSERACCOUNTPAGE=function(){var r=l.mR(this,cO,"ActivateUserAccountPage",114);r.ln=114;{r.ln=116;this.fE("ACTIVATINGUSERACCOUNTPAGE");}r.ln=118;r.e();};cO.mthACTIVATELOGIN=function(){var m=this.REF,r=l.mR(this,cO,"ActivateLogin",120);r.ln=120;{r.ln=122;m.LOGINPOPUP.mthSHOW();}r.ln=124;r.e();};cO.mthLOGIN=function(p0,p1){var f=this.FLD.XDTOOLSA,m=this.REF,r=l.mR(this,cO,"Login",126),mth=r;var P0=r.cPF("EMAIL",Fd.F1.Dc);var P1=r.cPF("PASSWORD",Fd.F2.Dc);P0.set(p0);P1.set(p1);var C0=r.cDR("LOGIN","XDTOOLSER","LOGIN");
C0.iC();C0.aH("COMPLETED",this,e1);C0.aH("FAILED",this,e2);r.ln=126;{r.ln=132;C0.mthEXECUTEASYNC({FLD:{"XSACCEML":P0.get(),"XSPASSWRD":l.s.Encrypt(P1.get(),P0.get())}},{FLD:{"XSSTATUS":f.F3}});}r.ln=163;r.e();function e1(sender,Ps){var r=l.eR(this,cO,"#Login.Completed",134,mth);r.ln=134;{r.ln=136;{var v1=f.F3.get();if(r.ln=138,l.s.eq(v1,"OK")){r.ln=140;m.GACTIVEUSER.mthPREPARE(P0.get());r.ln=142;m.GLOGGEDIN.set(true);r.ln=144;this.REF.GAPPLICATION.ref.mthSAVEVALUE("LOGGEDIN",m.GLOGGEDIN.get());r.ln=146;
this.fE("LOGGEDIN");}else{r.ln=149;{var eP=l.ePs();eP.cF("REASON",Fd.F3.Dc);eP.r("REASON").set(f.F3.get());this.fE("LOGINFAILED",eP);eP.e();}}r.ln=151;}}r.ln=153;r.e();}function e2(sender,Ps){var r=l.eR(this,cO,"#Login.Failed",155,mth);var P2=Ps.r("HANDLED");r.ln=155;{r.ln=157;P2.set(true);r.ln=159;{var eP=l.ePs();eP.cF("REASON",Fd.F3.Dc);eP.r("REASON").set("SE");this.fE("LOGINFAILED",eP);eP.e();}}r.ln=161;r.e();}};cO.mthLOGOUT=function(){var m=this.REF,r=l.mR(this,cO,"LogOut",165);r.ln=165;{r.ln=167;
m.GACTIVEUSER.mthRESET();r.ln=169;m.GLOGGEDIN.set(false);r.ln=171;this.REF.GAPPLICATION.ref.mthSAVEVALUE("LOGGEDIN",m.GLOGGEDIN.get());r.ln=173;this.REF.GDATAMODEL.ref.getSHOPPINGCART().mthCLEAR();r.ln=175;this.fE("LOGGEDOUT");}r.ln=177;r.e();};cO.mthFINDPAGEPARAMETER=function(){var r=l.mR(this,cO,"FindPageParameter",179);var P0=r.cP("RESULT","PRIM_ALPH");r.ln=179;{r.ln=182;{var l1=l.WEB().getURLParameters().cI();while(l1.step()){var PARAMETER=r.sR("PARAMETER",l1.item());r.ln=184;if(l.s.ne(l.s.UpperCase(PARAMETER.getName()),"PAGE"))
{continue;}r.ln=186;P0.set(l.s.UpperCase(PARAMETER.getValue()));r.ln=188;break;r.ln=190;}l1.end();r.dR("PARAMETER");}}r.ln=192;return r.rV(P0.get());};cO.mthNAVIGATE=function(p0){var r=l.mR(this,cO,"Navigate",194);var P0=r.cP("URL","PRIM_ALPH");P0.set(p0);r.ln=194;{r.ln=197;{var v1=cO.mthFINDPAGEPARAMETER.call(this);if(r.ln=199,l.s.eq(v1,"GARDENTOOLS")){r.ln=201;this.mthACTIVATESEARCHPAGEGARDENTOOLS();}else if(r.ln=203,l.s.eq(v1,"HANDTOOLS")){r.ln=205;this.mthACTIVATESEARCHPAGEHANDTOOLS();}else if(r.ln=207,l.s.eq(v1,"POWERTOOLS"))
{r.ln=209;this.mthACTIVATESEARCHPAGEPOWERTOOLS();}else if(r.ln=211,l.s.eq(v1,"SHOPPINGCART")){r.ln=213;this.mthACTIVATESHOPPINGCARTPAGE();}else if(r.ln=215,l.s.eq(v1,"USEREDITOR")){r.ln=217;this.mthACTIVATEUSERACCOUNTPAGE();}else{r.ln=221;this.mthACTIVATEHOMEPAGE();}r.ln=223;}}r.ln=225;r.e();};cO.mthREGISTERUSER=function(){var r=l.mR(this,cO,"RegisterUser",227);r.ln=227;{r.ln=229;this.mthACTIVATEUSERACCOUNTPAGE();}r.ln=231;r.e();};function e3(sender,Ps){var r=l.eR(this,cO,"#sys_web.URLChanged #gDatamodel.Prepared",233);
r.ln=233;{r.ln=235;if(this.REF.GDATAMODEL.ref.getISPREPARED()){r.ln=237;cO.mthNAVIGATE.call(this,l.WEB().getURL());}}r.ln=241;r.e();};function e4(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#gActiveUser.Prepared",243);r.ln=243;{r.ln=245;this.REF.GDATAMODEL.ref.getSHOPPINGCART().setACCOUNTID(m.GACTIVEUSER.getID());r.ln=248;if(this.REF.GDATAMODEL.ref.getSHOPPINGCART().getITEMS().getIsEmpty()){r.ln=250;this.REF.GDATAMODEL.ref.getSHOPPINGCART().mthLOADSAVEDCART(m.GACTIVEUSER.getID());}}r.ln=254;r.e();};
cO.mthSAVEVALUE=function(p0,p1){var r=l.mR(this,cO,"SaveValue",256);var P0=r.cP("NAME","PRIM_ALPH");var P1=r.cP("VALUE","PRIM_ALPH");P0.set(p0);P1.set(p1);r.ln=256;{r.ln=260;P0.set(l.cat("ToolsDemo_",P0.get()));r.ln=262;if((l.WEB().getLocalStorage().get(P0.get())!=null)){r.ln=264;l.WEB().getLocalStorage().get(P0.get()).set(P1.get());}else{r.ln=268;l.WEB().getLocalStorage().mthADD(P0.get(),P1.get());}}r.ln=272;r.e();};cO.mthRESTOREVALUE=function(p0){var r=l.mR(this,cO,"RestoreValue",274);var P0=r.cP("NAME","PRIM_ALPH");
var P1=r.cP("RESULT","PRIM_ALPH");P0.set(p0);r.ln=274;{r.ln=278;P0.set(l.cat("ToolsDemo_",P0.get()));r.ln=280;if((l.WEB().getLocalStorage().get(P0.get())!=null)){r.ln=282;P1.set(l.WEB().getLocalStorage().get(P0.get()).get());}}r.ln=286;return r.rV(P1.get());};cO.getACTIVEDESIGN=function(){return this.REF.GACTIVEDESIGN.get();};cO.getACTIVEUSER=function(){return this.REF.GACTIVEUSER;};cO.getISLOGGEDIN=function(){return this.REF.GLOGGEDIN.get();};{Fd.F1.Dc=function(){this.aN.call(this,Fd.F1);};l.cFC({co:Fd.F1.Dc,an:"PRIM_FLD",fn:"XSACCEML"});
}{Fd.F2.Dc=function(){this.aN.call(this,Fd.F2);};l.cFC({co:Fd.F2.Dc,an:"PRIM_FLD",fn:"XSPASSWRD"});}{Fd.F3.Dc=function(){this.aN.call(this,Fd.F3);};l.cFC({co:Fd.F3.Dc,an:"PRIM_FLD",fn:"XSSTATUS"});}cO.srGPENDINGSEARCHCRITERION=function(rn){this.sR("GPENDINGSEARCHCRITERION",rn);};},{rc:["XDTOOLSO","XDTOO_16","XDTOO_12","XDTOOLSL"],rp:["PRIM_ALPH","PRIM_BOLN","PRIM_FLD","PRIM_WEB.DataRequest"],dp:["PRIM_OBJT","PRIM_ALPH"]});