LANSA.addComponent({id:"DF_NOTE_H",nm:"DF_Note_CommandHandler",ot:"rp",tp:"Reusable Part",de:"\\OC=Notes Command Handler",tl:14020001},function(l,oI,u){var lIO="";var cL="ENG";if((l.gCL()=="FRA")||(l.gCL()=="JPN")){cL=l.gCL();}var c1=l.cDec(".96"),c2=l.cDec("1.04"),c3=l.cDec("1.0");var Fd={F1:{nm:"DF_NOTE_G",an:"DF_NOTE_GUID",ft:"A",ln:32,dc:0,lb:{"ENG":"GUID","FRA":"Note GUID","JPN":"Note GUID"}[cL],h1:{"ENG":"GUID","FRA":"Note","JPN":"Note"}[cL],h2:"GUID",h3:" ",de:{"ENG":"GUID","FRA":"Note GUID","JPN":"Note GUID"}[cL],
dv:"",ia:["FE"]},F2:{nm:"STD_INT",ft:"I",ln:4,dc:0,ec:"J",lb:{"ENG":"Std Integer","FRA":"?","JPN":"?"}[cL],h1:{"ENG":"Standard","FRA":"?","JPN":"?"}[cL],h2:{"ENG":"Integer","FRA":"?","JPN":"?"}[cL],h3:{"ENG":"Field","FRA":"?","JPN":"?"}[cL],de:{"ENG":"Standard Integer field","FRA":"?","JPN":"?"}[cL],dv:0,ia:["FE","RB"]},F3:{nm:"DF_NOTE_U",an:"DF_NOTE_Updated",ft:"DT",ln:26,dc:0,lb:{"ENG":"Updated","FRA":"Note Updated","JPN":"Note Updated"}[cL],h1:{"ENG":"Updated","FRA":"Note","JPN":"Note"}[cL],h2:{"ENG":" ","FRA":"Updated","JPN":"Updated"}[cL],
h3:" ",de:{"ENG":"Updated","FRA":"Note Updated","JPN":"Note Updated"}[cL],dv:l.SqlNull,ia:["ASQN","FE","ISO","SUTC"],oa:["TCYX"]},F4:{nm:"DF_NOTE_S",an:"DF_NOTE_Subject",ft:"NV",ln:512,dc:0,lb:{"ENG":"Subject","FRA":"Note Subject","JPN":"Note Subject"}[cL],h1:{"ENG":"Subject","FRA":"Note","JPN":"Note"}[cL],h2:{"ENG":" ","FRA":"Subject","JPN":"Subject"}[cL],h3:" ",de:{"ENG":"Subject","FRA":"Note Subject","JPN":"Note Subject"}[cL],dv:"",ia:["FE","LC"]},F5:{nm:"DF_NOTE_WORKINGLIST_COUNTER",ft:"I",ln:4,
dc:0,ec:"J",lb:"Std Integer",h1:"Standard",h2:"Integer",h3:"Field",de:"Standard Integer field",dv:0,ia:["FE","RB"]},F6:{nm:"DF_NOTE_C",an:"DF_NOTE_Created",ft:"DT",ln:26,dc:0,lb:{"ENG":"Created","FRA":"Note Created","JPN":"Note Created"}[cL],h1:{"ENG":"Created","FRA":"Note","JPN":"Note"}[cL],h2:{"ENG":" ","FRA":"Created","JPN":"Created"}[cL],h3:" ",de:{"ENG":"Created","FRA":"Note Created","JPN":"Note Created"}[cL],dv:l.SqlNull,ia:["ASQN","FE","ISO","SUTC"],oa:["TCYC"]},F7:{nm:"DF_NOTE_3",an:"DF_NOTE_CreatedBy",
ft:"A",ln:32,dc:0,lb:{"ENG":"By","FRA":"Note Created By","JPN":"Note Created By"}[cL],h1:{"ENG":"By","FRA":"Note","JPN":"Note"}[cL],h2:{"ENG":"By","FRA":"Created","JPN":"Created"}[cL],h3:{"ENG":" ","FRA":"By","JPN":"By"}[cL],de:{"ENG":"By","FRA":"Note Created By","JPN":"Note Created By"}[cL],dv:"",ia:["FE"]},F8:{nm:"DF_NOTE_4",an:"DF_NOTE_UpdatedBy",ft:"A",ln:32,dc:0,lb:{"ENG":"By","FRA":"Note Updated By","JPN":"Note Updated By"}[cL],h1:{"ENG":"By","FRA":"Note","JPN":"Note"}[cL],h2:{"ENG":" ","FRA":"Updated","JPN":"Updated"}[cL],
h3:{"ENG":" ","FRA":"By","JPN":"By"}[cL],de:{"ENG":"By","FRA":"Note Updated By","JPN":"Note Updated By"}[cL],dv:"",ia:["FE"]},F9:{nm:"IO$STS",ft:"A",ln:2,dc:0,lb:{"ENG":"I/O status ....","FRA":"Statut I/O  . .","JPN":"I/O status ...."}[cL],h1:{"ENG":"I/O","FRA":"Statut","JPN":"I/O"}[cL],h2:{"ENG":"Status","FRA":"I/O","JPN":"Status"}[cL],h3:" ",de:{"ENG":"Data base I/O operation status code","FRA":"Code statut opération I/O","JPN":"Data base I/O operation status code"}[cL],dv:"",ia:["FE"]}};var cO=l.rC(oI,
{an:"VF_AC010O",fd:Fd,mt:{uInitialize:{},uTerminate:{},uExecute:{ps:{"GotoFreeState":{pt:"io"},"SwitchCallerReference":{pt:"i"}}},uQueryCanClose:{ps:{"CanBeCancelled":{pt:"i"},"TimeOutinProgress":{pt:"i"}}},LoadNoteList:{},ShowRightPanelonSmallDevice:{},ShowLeftPanelonSmallDevice:{}},co:function(){cO.aN.call(this);var f=this.aF("DF_NOTE_H",Fd);var C0=this.cR("MAINTABLELAYOUT","PRIM_TBLO");var C1=this.cR("COLUMN1","PRIM_TBLO","Column");var C2=this.cR("ATTACHLAYOUTLEFTPANEL","PRIM_ATLM");var C3=this.cR("ATTACHITEMLEFTNOTES","PRIM_ATLI");
var C4=this.cR("ATTACHITEMBUTTONPANEL","PRIM_ATLI");var C5=this.cR("BUTTONPANEL","VF_UI049O");var C6=this.cR("ATTACHLAYOUTRIGHTPANEL","PRIM_ATLM");var C7=this.cR("ATTACHITEMRIGHT","PRIM_ATLI");var C8=this.cR("COLUMN12DIVIDER","PRIM_TBLO","ColumnDivider");var C9=this.cR("COLUMN2","PRIM_TBLO","Column");var C10=this.cR("ROW1","PRIM_TBLO","Row");var C11=this.cR("MANAGE_MAINPANEL_LEFT","PRIM_TBLO","Item");var C12=this.cR("MANAGE_MAINPANEL_RIGHT","PRIM_TBLO","Item");var C13=this.cR("MAINPANEL_LEFT","PRIM_PANL");
var C14=this.cR("MAINPANEL_RIGHT","PRIM_PANL");var C15=this.cR("NOTESLIST","PRIM_LIST");var C16=this.cR("COLUMNDF_NOTE_SUBJECT","PRIM_LIST","String");var C17=this.cR("COLUMNDF_NOTE_GUID","PRIM_LIST","String");var C18=this.cR("COLUMNDF_NOTE_UPDATED","PRIM_LIST","DateTime");var C19=this.cR("DF_NOTE_NOTEDETAILPANEL","DF_NOTE_D");var C20=this.cF("CURRENTNOTEGUID",Fd.F1.Dc);var C21=this.cR("USERINTERFACELOCKED","PRIM_BOLN");var C22=this.cR("ONSMALLSCREENDEVICE","PRIM_BOLN");C0.iC();C1.setDisplayPosition(1);
C1.setParent(C0);C1.setWidth(c1);C1.iC();C2.iC();C3.setManage(C15);C3.setParent(C2);C3.setAttachment("CENTER");C3.iC();C4.setParent(C2);C4.setAttachment("BOTTOM");C4.setManage(C5);C4.setMarginTop(2);C4.setMarginBottom(2);C4.iC();C5.setDisplayPosition(2);C5.setParent(C13);C5.setTabPosition(2);C5.setHeight(30);C5.setTop(369);C5.setWidth(411);C5.iC();C6.iC();C7.setManage(C19);C7.setParent(C6);C7.setAttachment("CENTER");C7.iC();C8.setDisplayPosition(2);C8.setParent(C0);C8.iC();C9.setDisplayPosition(3);
C9.setParent(C0);C9.setWidth(c2);C9.iC();C10.setDisplayPosition(1);C10.setParent(C0);C10.iC();C11.setParent(C0);C11.setRow(C10);C11.setColumn(C1);C11.setManage(C13);C11.iC();C12.setParent(C0);C12.setRow(C10);C12.setColumn(C9);C12.setManage(C14);C12.iC();C13.setParent(this);C13.setDisplayPosition(1);C13.setTabPosition(1);C13.setTop(0);C13.setHeight(401);C13.setLeft(0);C13.setWidth(411);C13.setLayoutManager(C2);C13.iC();C14.setParent(this);C14.setDisplayPosition(2);C14.setTabPosition(2);C14.setLayoutManager(C6);
C14.setHeight(401);C14.setLeft(412);C14.setTop(0);C14.setWidth(445);C14.iC();C15.setParent(C13);C15.setDisplayPosition(1);C15.setTabPosition(1);C15.setHeight(367);C15.setLeft(0);C15.setTop(0);C15.setWidth(411);C15.setColumnLines(false);C15.setRowLines(false);C15.iC();C16.setColumnWidth(1);C16.setDisplayPosition(1);C16.setParent(C15);C16.setSource(f.F4);C16.setSortOnClick(true);C16.setColumnUnits("PROPORTION");C16.iC();C17.setColumnWidth(311);C17.setDisplayPosition(2);C17.setParent(C15);C17.setSource(f.F1);
C17.setVisible(false);C17.setColumnVisible(false);C17.iC();C18.setColumnWidth(1);C18.setDisplayPosition(3);C18.setParent(C15);C18.setSource(f.F3);C18.setColumnUnits("PROPORTION");C18.setSortOnClick(true);C18.iC();C19.setParent(C14);C19.setHeight(401);C19.setWidth(445);C19.iC();C20.aD();C20.iC();C21.iC();C22.iC();C5.aH("BUTTONCLICKED",this,e2);C15.aH("ITEMCLICK",this,e1);C15.aH("ITEMDOUBLECLICK",this,e1);C19.aH("DELETEDNOTEDETAILS",this,e3);C19.aH("CLOSENOTEDETAILS",this,e4);C19.aH("UPDATEDNOTEDETAILS",this,e5);
this.REF.AVLOCALTIMER.aH("TICK",this,e6);this.setHeight(401);this.setWidth(857);this.setLayoutManager(C0);var li=this.aL("DF_NOTE_H");li.DF_NOTE_PROXYLIST=l.cLT({"DF_NOTE_G":f.F1,"DF_NOTE_S":f.F4,"DF_NOTE_C":f.F6,"DF_NOTE_3":f.F7,"DF_NOTE_U":f.F3,"DF_NOTE_4":f.F8},f.F5);}});var cA=cO.aN.prototype;cO.mthUINITIALIZE=function(){var m=this.REF,r=l.mR(this,cO,"uInitialize",66);r.ln=66;{r.ln=69;cA.mthUINITIALIZE.call(this);r.ln=72;m.BUTTONPANEL.mthUINITIALIZE(false,"LEFT");r.ln=73;m.BUTTONPANEL.mthUADDBUTTON("Make New Note","NEW",u,140);
r.ln=74;m.BUTTONPANEL.mthUADDBUTTON("Refresh Notes List","REFRESH",false,160);r.ln=77;m.ONSMALLSCREENDEVICE.set(this.REF.USYSTEM.ref.getUFRAMEWORKMANAGER().getAVSMALLSCREEN());r.ln=80;this.REF.USYSTEM.ref.getCURRENTTHEME().mthAVSTYLEPRIM_LISTFORFORMFACTOR(m.NOTESLIST);r.ln=83;m.DF_NOTE_NOTEDETAILPANEL.mthUINITIALIZE();}r.ln=85;r.e();};cO.mthUTERMINATE=function(){var li=this.LIST.DF_NOTE_H,m=this.REF,r=l.mR(this,cO,"uTerminate",88);r.ln=88;{r.ln=90;m.BUTTONPANEL.mthUTERMINATE();r.ln=91;m.NOTESLIST.clearList();
r.ln=92;li.DF_NOTE_PROXYLIST.clearList();r.ln=93;m.DF_NOTE_NOTEDETAILPANEL.mthUTERMINATE();r.ln=95;cA.mthUTERMINATE.call(this);}r.ln=96;r.e();};cO.mthUEXECUTE=function(p0,p1){var r=l.mR(this,cO,"uExecute",98);var P0=r.cP("GOTOFREESTATE","PRIM_BOLN");var P1=r.cPD("SWITCHCALLERREFERENCE");P0.set(p0.get());P1=p1;r.ln=98;{r.ln=100;cA.mthUEXECUTE.call(this,P0,P1);r.ln=102;this.mthLOADNOTELIST();p0.set(P0.get());}r.ln=105;r.e();};cO.mthUQUERYCANCLOSE=function(p0,p2){var m=this.REF,r=l.mR(this,cO,"uQueryCanClose",108);
var P0=r.cP("CANBECANCELLED","PRIM_BOLN");var P1=r.cP("ALLOW","PRIM_BOLN");var P2=r.cP("TIMEOUTINPROGRESS","PRIM_BOLN");P0.set(p0);P2.set(p2);r.ln=108;{r.ln=110;if(l.tB(P0.get())){r.ln=111;m.DF_NOTE_NOTEDETAILPANEL.mthSAVECURRENTNOTEIFDIRTY(P0.get());}r.ln=114;P1.set(true);}r.ln=116;return r.rV(P1.get());};cO.mthLOADNOTELIST=function(){var li=this.LIST.DF_NOTE_H,m=this.REF,r=l.mR(this,cO,"LoadNoteList",119);var C0=r.cDR("LOADPROXYLIST","DF_NOTE_5","LOADPROXYLIST");C0.iC();r.ln=119;{r.ln=123;m.USERINTERFACELOCKED.set(true);
r.ln=126;m.NOTESLIST.clearList();r.ln=129;C0.mthEXECUTE({FLD:{"DF_NOTE_B":this.getAVASSOCIATEDINSTANCE().getAVBUSINESSOBJECTREFERENCE().getUUSEROBJECTTYPE(),"DF_NOTE_1":this.getAVASSOCIATEDINSTANCE().getCOMBINEDKEY().get()}},{LIST:{"DF_NOTE_PROXYLIST":li.DF_NOTE_PROXYLIST}});r.ln=132;{var l1=li.DF_NOTE_PROXYLIST.selectList();while(l1.step()){r.ln=133;m.NOTESLIST.addEntry();r.ln=134;}l1.end();}r.ln=137;m.DF_NOTE_NOTEDETAILPANEL.mthSHOWNOTHING();r.ln=140;this.mthSHOWLEFTPANELONSMALLDEVICE();r.ln=143;
if(this.REF.AVFRAMEWORKMANAGER.getAVSMALLSCREEN()){r.ln=144;if((this.getAVASSOCIATEDINSTANCE()!=null)){r.ln=145;this.setAVTITLEBARCAPTION(this.getAVASSOCIATEDINSTANCE().getAVVISUALID1().get());}else{r.ln=147;this.setAVTITLEBARCAPTION("Unknown");}}r.ln=153;m.USERINTERFACELOCKED.set(false);}r.ln=155;r.e();};function e1(sender,Ps){var f=this.FLD.DF_NOTE_H,m=this.REF,r=l.eR(this,cO,"#NotesList.ItemClick #NotesList.ItemDoubleClick",158);r.ln=158;{r.ln=160;if((l.b.Not(m.USERINTERFACELOCKED.get())&&(m.NOTESLIST.getFocusItem()!=null)))
{r.ln=162;f.F9.set(lIO=m.NOTESLIST.getEntry(m.NOTESLIST.getFocusItem().getEntry()));r.ln=164;m.CURRENTNOTEGUID.set(f.F1.get());r.ln=165;this.REF.AVLOCALTIMER.setComponentTag("SHOW");this.REF.AVLOCALTIMER.setInterval(2);r.ln=166;this.mthAVGOTOBUSYSTATE("Loading",false,u);}}r.ln=170;r.e();};function e2(sender,Ps){var r=l.eR(this,cO,"#ButtonPanel.ButtonClicked",173);var P0=Ps.r("WITHID");r.ln=173;{r.ln=175;{var v1=P0.get();if(r.ln=177,l.s.eq(v1,"NEW")){r.ln=178;this.REF.AVLOCALTIMER.setComponentTag("NEW");
this.REF.AVLOCALTIMER.setInterval(2);r.ln=179;this.mthAVGOTOBUSYSTATE("Creating",false,u);}else if(r.ln=181,l.s.eq(v1,"REFRESH")){r.ln=182;this.REF.AVLOCALTIMER.setComponentTag("REFRESH");this.REF.AVLOCALTIMER.setInterval(2);r.ln=183;this.mthAVGOTOBUSYSTATE("Refreshing",false,u);}r.ln=185;}}r.ln=187;r.e();};function e3(sender,Ps){var f=this.FLD.DF_NOTE_H,m=this.REF,r=l.eR(this,cO,"#DF_Note_NoteDetailPanel.DeletedNoteDetails",190);var P0=Ps.r("GUID");var C0=r.cF("PREVIOUSENTRYNUMBER",Fd.F2.Dc);C0.iC();
r.ln=190;{r.ln=195;m.USERINTERFACELOCKED.set(true);r.ln=198;{var l1=m.NOTESLIST.selectList();while(l1.step()){if(!(l.s.eq(f.F1.get(),P0.get()))){continue;}r.ln=199;C0.set(l.sub(m.NOTESLIST.getCurrentItem().getEntry(),1));r.ln=200;m.NOTESLIST.deleteEntry();r.ln=201;}l1.end();}r.ln=204;if(l.n.lt(C0.get(),1)){r.ln=205;C0.set(1);}r.ln=208;f.F9.set(lIO=m.NOTESLIST.getEntry(C0.get()));r.ln=209;if(lIO=="OK"){r.ln=210;m.NOTESLIST.getCurrentItem().setSelected(true);m.NOTESLIST.getCurrentItem().setFocus(true);
r.ln=211;m.CURRENTNOTEGUID.set(f.F1.get());r.ln=212;this.REF.AVLOCALTIMER.setComponentTag("SHOW");this.REF.AVLOCALTIMER.setInterval(2);r.ln=213;this.mthAVGOTOBUSYSTATE("Loading",false,u);}r.ln=217;m.USERINTERFACELOCKED.set(false);}r.ln=219;r.e();};function e4(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#DF_Note_NoteDetailPanel.CloseNoteDetails",222);r.ln=222;{r.ln=225;this.mthSHOWLEFTPANELONSMALLDEVICE();r.ln=228;m.DF_NOTE_NOTEDETAILPANEL.mthSHOWNOTHING();}r.ln=230;r.e();};function e5(sender,Ps){var f=this.FLD.DF_NOTE_H,m=this.REF,r=l.eR(this,cO,"#DF_Note_NoteDetailPanel.UpdatedNoteDetails",233);
var P0=Ps.r("GUID");var P1=Ps.r("UPDATED");var P2=Ps.r("SUBJECT");r.ln=233;{r.ln=236;this.mthSHOWLEFTPANELONSMALLDEVICE();r.ln=239;m.USERINTERFACELOCKED.set(true);r.ln=242;{var l1=m.NOTESLIST.selectList();while(l1.step()){if(!(l.s.eq(f.F1.get(),P0.get()))){continue;}r.ln=243;f.F3.set(P1.get());r.ln=244;f.F4.set(P2.get());r.ln=245;m.NOTESLIST.updateEntry();r.ln=246;m.USERINTERFACELOCKED.set(false);l1.end();r.e();return;r.ln=248;}l1.end();}r.ln=251;f.F1.set(P0.get());r.ln=252;f.F3.set(P1.get());r.ln=253;
f.F4.set(P2.get());r.ln=254;m.NOTESLIST.addEntry();r.ln=255;m.NOTESLIST.getCurrentItem().setSelected(true);m.NOTESLIST.getCurrentItem().setFocus(true);r.ln=256;m.NOTESLIST.mthVERTICALSCROLLTO(m.NOTESLIST.getCurrentItem(),"VISIBLE");r.ln=258;m.USERINTERFACELOCKED.set(false);}r.ln=260;r.e();};cO.mthSHOWRIGHTPANELONSMALLDEVICE=function(){var m=this.REF,r=l.mR(this,cO,"ShowRightPanelonSmallDevice",263);r.ln=263;{r.ln=265;if(l.tB(m.ONSMALLSCREENDEVICE.get())){r.ln=267;m.COLUMN12DIVIDER.setWidth(0);r.ln=269;
m.COLUMN1.setWidth(0);r.ln=271;m.COLUMN2.setWidth(c3);}}r.ln=275;r.e();};cO.mthSHOWLEFTPANELONSMALLDEVICE=function(){var m=this.REF,r=l.mR(this,cO,"ShowLeftPanelonSmallDevice",278);r.ln=278;{r.ln=280;if(l.tB(m.ONSMALLSCREENDEVICE.get())){r.ln=282;m.COLUMN12DIVIDER.setWidth(0);r.ln=284;m.COLUMN2.setWidth(0);r.ln=286;m.COLUMN1.setWidth(c3);}}r.ln=291;r.e();};function e6(sender,Ps){var m=this.REF,r=l.eR(this,cO,"#AVLOCALTIMER.Tick",295);r.ln=295;{r.ln=297;this.REF.AVLOCALTIMER.setInterval(0);r.ln=299;
{var v1=l.s.UpperCase(this.REF.AVLOCALTIMER.getComponentTag());if(r.ln=301,l.s.eq(v1,"SHOW")){r.ln=302;m.DF_NOTE_NOTEDETAILPANEL.mthSHOWEXISTINGNOTE(this.getAVASSOCIATEDINSTANCE(),m.CURRENTNOTEGUID.get());r.ln=303;this.mthSHOWRIGHTPANELONSMALLDEVICE();}else if(r.ln=305,l.s.eq(v1,"NEW")){r.ln=306;m.DF_NOTE_NOTEDETAILPANEL.mthMAKENEWNOTE(this.getAVASSOCIATEDINSTANCE());r.ln=307;this.mthSHOWRIGHTPANELONSMALLDEVICE();}else if(r.ln=309,l.s.eq(v1,"REFRESH")){r.ln=310;this.mthLOADNOTELIST();}r.ln=312;}r.ln=314;
this.mthAVGOTOFREESTATE();}r.ln=316;r.e();};{Fd.F1.Dc=function(){this.aN.call(this,Fd.F1);};l.cFC({co:Fd.F1.Dc,an:"PRIM_FLD",fn:"DF_NOTE_G"});}{Fd.F2.Dc=function(){this.aN.call(this,Fd.F2);};l.cFC({co:Fd.F2.Dc,an:"PRIM_FLD",fn:"STD_INT"});}{Fd.F3.Dc=function(){this.aN.call(this,Fd.F3);};l.cFC({co:Fd.F3.Dc,an:"PRIM_FLD",fn:"DF_NOTE_U"});}{Fd.F4.Dc=function(){this.aN.call(this,Fd.F4);};l.cFC({co:Fd.F4.Dc,an:"PRIM_FLD",fn:"DF_NOTE_S"});}cO.srAVFRAMEWORKMANAGER=function(rn){cA.srAVFRAMEWORKMANAGER.call(this,rn);
};},{rc:["VF_AC010O","VF_UI049O","DF_NOTE_D"],rp:["PRIM_TBLO","PRIM_TBLO.Column","PRIM_ATLM","PRIM_ATLI","PRIM_TBLO.ColumnDivider","PRIM_TBLO.Row","PRIM_TBLO.Item","PRIM_PANL","PRIM_LIST","PRIM_LIST.String","PRIM_LIST.DateTime","PRIM_FLD","PRIM_BOLN","PRIM_WEB.DataRequest"]});